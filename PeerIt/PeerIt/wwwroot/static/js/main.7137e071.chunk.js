(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){e.exports=n(22)},15:function(e,t,n){},16:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var i=n(0),o=n.n(i),a=n(1),r=n.n(a),s=(n(15),n(2)),l=n(3),c=n(6),u=n(4),d=n(5),h=n(7),p=(n(16),n(17),n(21),function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{ref:"root"})}},{key:"setWebixData",value:function(e){var t=this.ui;t.setValues?t.setValues(e):t.parse?t.parse(e):t.setValue&&t.setValue(e)}},{key:"componentWillUnmount",value:function(){this.ui.destructor(),this.ui=null}},{key:"componentWillUpdate",value:function(e){e.data&&this.setWebixData(e.data),e.select&&this.select(e.select)}},{key:"componentDidMount",value:function(){this.ui=window.webix.ui(this.props.ui,r.a.findDOMNode(this.refs.root)),this.componentWillUpdate(this.props)}}]),t}(i.Component)),w=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={data:null},window.webix.protoUI({name:"react",defaults:{borderless:!0},$init:function(e){this.$ready.push(function(){r.a.render(this.config.app,this.$view)})}},window.webix.ui.view),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(p,{ui:{type:"space",id:"a1",rows:[{type:"space",padding:0,responsive:"a1",cols:[{view:"list",data:["Users","Reports","Settings"],ready:function(){this.select(this.getFirstId())},select:!0,scroll:!1,width:200},{template:"column 2",width:200},{view:"datatable",select:!0,columns:[{id:"title",fillspace:1},{id:"votes"}],data:"data",minWidth:300}]}]},data:null}))}}]),t}(i.Component),m=function(e){function t(e){var n;return Object(s.a)(this,t),n=Object(c.a)(this,Object(u.a)(t).call(this,e)),console.log(e),n.state={baseUrl:e.baseUrl,data:null},n.updateLogin=e.handleLogin,console.log(n.state),window.webix.protoUI({name:"react",defaults:{borderless:!0},$init:function(e){this.$ready.push(function(){r.a.render(this.config.app,this.$view)})}},window.webix.ui.view),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"clearError",value:function(){console.log("clear error"),window.webix.$$("loginForm").elements.passwordErrorLabel.setValue("")}},{key:"doLogin",value:function(){var e=this,t=window.webix.$$("loginForm").elements.emailAddress.getValue(),n=window.webix.$$("loginForm").elements.password.getValue();console.log("Username: "+t+" Password: "+n+" baseUrl:"+this.state),fetch(this.state.baseUrl+"Account/Login?Email="+t+"&Password="+n+"&returnUrl=",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin"}).then(function(e){return e.json()}).then(function(t){if(console.log("Success:",JSON.stringify(t)),t.success)e.updateLogin(t.data[0].emailAddress,t.data[0].role);else{var n="";t.error.forEach(function(e){console.log(e),n+=e.description}),window.webix.$$("loginForm").elements.passwordErrorLabel.setValue(n)}}).catch(function(e){return console.error("Error:",e)})}},{key:"render",value:function(){var e={type:"space",id:"a1",height:window.innerHeight-5,width:window.innerWidth-5,minWidth:500,minHeight:500,rows:[{type:"space",padding:0,responsive:"a1",margin:0,cols:[{},{view:"form",id:"loginForm",elements:[{type:"header",template:"Please Login"},{view:"text",labelAlign:"top",labelPosition:"top",name:"emailAddress",label:"Email Address",validate:"isNotEmpty",validateEvent:"key",value:""},{view:"text",labelPosition:"top",type:"password",name:"password",label:"Password",validate:"isNotEmpty",validateEvent:"key",value:""},{view:"label",name:"passwordErrorLabel",label:""},{},{view:"button",label:"login",click:this.doLogin.bind(this)}],width:500,height:500,gravity:.3},{}]}]};return o.a.createElement("div",null,o.a.createElement(p,{ui:e,data:null}))}}]),t}(i.Component),b=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={currentUser:null,baseUrl:"http://localhost:8080/",role:null},n.handleLogin=n.updateLogin.bind(Object(h.a)(Object(h.a)(n))),n.checkIfLoggedIn(),n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"checkIfLoggedIn",value:function(){fetch(this.state.baseUrl+"Account/GetCurrentUserRole",{method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"},credentials:"same-origin"}).then(function(e){var t=e.json();return console.log(e),t}).then(function(e){if(e.success)console.log("show me "+JSON.stringify(e));else{e.error.forEach(function(e){console.log(e),e.description})}}).catch(function(e){return console.error("Error:",e)})}},{key:"renderPortal",value:function(){if(null!=this.state.currentUser)return console.log("render portal"),o.a.createElement(w,{baseUrl:this.state.baseUrl})}},{key:"renderLogin",value:function(){if(null==this.state.currentUser)return console.log("render login"),o.a.createElement(m,{baseUrl:this.state.baseUrl,handleLogin:this.handleLogin})}},{key:"updateLogin",value:function(e,t){this.setState({currentUser:e,role:t})}},{key:"render",value:function(){return o.a.createElement("div",{className:"appContainer"},this.renderLogin(),this.renderPortal())}}]),t}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[10,1,2]]]);
//# sourceMappingURL=main.7137e071.chunk.js.map