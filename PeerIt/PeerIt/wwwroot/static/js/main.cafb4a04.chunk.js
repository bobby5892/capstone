(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,n){e.exports=n(31)},16:function(e,t,n){},17:function(e,t,n){},23:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var i=n(0),s=n.n(i),a=n(7),r=n.n(a),o=(n(16),n(1)),l=n(2),d=n(5),u=n(3),c=n(4),w=n(6),h=(n(17),n(18),n(22),function(e){function t(){return Object(o.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{ref:"root"})}},{key:"setWebixData",value:function(e){var t=this.ui;t.setValues?t.setValues(e):t.parse?t.parse(e):t.setValue&&t.setValue(e)}},{key:"componentWillUnmount",value:function(){this.ui.destructor(),this.ui=null}},{key:"componentWillUpdate",value:function(e){e.data&&this.setWebixData(e.data),e.select&&this.select(e.select)}},{key:"componentDidMount",value:function(){this.ui=window.webix.ui(this.props.ui,r.a.findDOMNode(this.refs.root)),this.componentWillUpdate(this.props)}}]),t}(i.Component)),m=n(8),g=(n(23),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={currentUser:e.currentUser,role:e.role,data:null,viewingCourse:e.viewingCourse,Courses:[]},n.handleCourseViewer=e.handleCourseViewer,n.handleMenuClick=e.handleMenuClick,n.component={},window.webix.protoUI({name:"react",defaults:{borderless:!0},$init:function(e){this.$ready.push(function(){r.a.render(this.config.app,this.$view)})}},window.webix.ui.view),n.loadCourses(),n}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(e),this.loadCourses()}},{key:"loadCourses",value:function(){var e=this;fetch("Course/GetCourses",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include",mode:"no-cors"}).then(function(e){return e.json()}).then(function(t){t.success&&(t.data.length>0&&e.setState({courses:t.data}),e.drawCourses())}).catch(function(e){return console.error("Error:",e)})}},{key:"drawCourses",value:function(){var e=this;if(null!=this.state.courses&&this.state.courses.length>0)this.state.courses.forEach(function(t){var n={view:"accordionitem",header:t.name,id:t.id,padding:0,css:"courseMenuItem",autoheight:!0,body:{cols:e.renderSubMenu(t.id)},on:{onItemClick:function(e){var t=!1;if(parseInt(e)!==parseInt(this.state.viewingCourse))t=!0;else try{var n=this.webixGetNextChild(e);if(!1!==n){var i={viewingCourse:parseInt(n)};this.handleCourseViewer(i)}}catch(s){console.log("error"+s)}t&&(this.handleCourseViewer({viewingCourse:parseInt(e)}),this.drawCourses())}.bind(e)},collapsed:!0,height:200};try{-1===window.webix.$$("courses").index(t.id)&&window.webix.$$("courses").addView(n)}catch(i){console.log("error"+i)}});else if(0==window.webix.$$("courses").getChildViews().length){window.webix.$$("courses").addView({view:"accordionitem",header:"No Courses",padding:0,css:"courseMenuItem",autoheight:!0,body:{view:"template",template:"No Courses"}})}}},{key:"renderSubMenu",value:function(e){var t;return"Administrator"===this.state.role||"Instructor"===this.state.role?[{id:"coursesTabView"+e,view:"tabview",css:"subCourseTabMenu",multiview:{animate:!0},cells:[(t={css:"subCourseMenu",header:"Students",id:"AdminInstructorSubListItem",autoheight:!0,body:{autoheight:!0,view:"datatable",columns:[{id:"firstName",header:"First Name",width:100},{id:"lastName",header:"Last Name",width:80}],url:"/Course/GetStudents?courseID="+e}},Object(m.a)(t,"autoheight",!0),Object(m.a)(t,"collapsed",!0),Object(m.a)(t,"gravity",1),t),{css:"subCourseMenu",header:"Assignments",autoheight:!0,body:{autoheight:!0,view:"datatable",id:"Assignments"+e,columns:[{id:"name",header:"Name",width:150},{id:"dueDate",header:"DueDate",width:150}],url:"/CourseAssignment/Assignments?courseID="+e,on:{onItemClick:function(t){console.log("test"+t),console.log("Data:"+JSON.stringify(window.webix.$$("Assignments"+e).getItem(t))),this.handleCourseViewer({viewingAssignment:window.webix.$$("Assignments"+e).getItem(t)}),this.handleMenuClick("ShowAssignment")}.bind(this)}},collapsed:!0},{css:"subCourseMenu",header:"Bulk",body:{view:"template",template:"bulk"}},{css:"subCourseMenu",header:"Settings",body:{view:"button",label:"Settings",type:"standard",on:{onItemClick:function(e){this.handleMenuClick("CourseContent")}.bind(this)}}}]}]:"Student"===this.state.role?[{view:"tabview",cells:[{header:"Your Assignments",body:{id:"menuItemStudentYourAssignments",body:"temp"}},{header:"Group Assignments",body:{id:"menuItemStudentGroupAssignments",body:"temp"}}]}]:void 0}},{key:"render",value:function(){return s.a.createElement("div",{id:"Courses"},s.a.createElement(h,{ui:{view:"scrollview",id:"verses",scroll:"y",height:500,width:320,body:{rows:[{autoheight:!0,view:"accordion",gravity:3,scroll:"y",multi:!1,css:"webix_dark",id:"courses",rows:[]}]}},data:null}))}}]),t}(i.Component)),v=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={currentUser:e.currentUser,role:e.role,data:null,seed:e.seed},n.redrawAll=e.redrawAll,n}return Object(c.a)(t,e),Object(l.a)(t,[{key:"createCourse",value:function(){var e=this,t=window.webix.$$("newCourseForm").getValues();fetch("Course/CreateCourse?courseName="+t.CourseName,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",mode:"no-cors"}).then(function(e){return e.json()}).then(function(t){t.success&&(e.setState({data:0}),e.redrawAll()),console.log(t)}).catch(function(e){return console.error("Error:",e)})}},{key:"renderCreateCourseWindow",value:function(){null==window.webix.$$("newCourseWindow")&&window.webix.ui({view:"window",id:"newCourseWindow",width:500,height:500,move:!0,position:"center",head:{type:"space",cols:[{view:"label",label:"Create New Course"},{view:"button",label:"Close",width:70,left:250,click:function(){window.webix.$$("newCourseWindow").close()}}]},body:{type:"space",rows:[{view:"form",id:"newCourseForm",width:400,elements:[{view:"text",label:"Course Name",name:"CourseName",labelWidth:100,invalidMessage:"Course Name can not be empty"},{margin:5,cols:[{view:"button",value:"Create Course",type:"form",click:function(){this.createCourse(),window.webix.$$("newCourseWindow").close()}.bind(this)}]}],rules:{CourseName:window.webix.rules.isNotEmpty}}]}}).show()}},{key:"render",value:function(){var e=this,t={view:"button",gravity:1,label:"Create Course",id:"createCourse_button",value:"Create Course",inputWidth:100,click:function(){e.renderCreateCourseWindow()}};return s.a.createElement("div",{id:"CreateCourse"},s.a.createElement(h,{ui:t,data:null}))}}]),t}(i.Component),b=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={currentUser:e.currentUser,role:e.role,viewingCourse:e.viewingCourse,viewingAssignment:e.viewingAssignment,data:null,seed:e.seed},n.logout=e.logout,n.handleMenuClick=e.handleMenuClick,n.showCreateCourse=e.handleCreateCourse,n.accountClick=e.accountClick,n.handleCourseViewer=e.handleCourseViewer,n.redrawAll=e.redrawAll,n}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"renderCourses",value:function(){return s.a.createElement(g,{currentUser:this.state.currentUser,role:this.state.role,handleCourseViewer:this.handleCourseViewer.bind(this),viewingCourse:this.state.viewingCourse,handleMenuClick:this.handleMenuClick,accountClick:this.accountClick.bind(this),redrawAll:this.redrawAll,seed:this.state.seed,viewingAssignment:this.state.viewingAssignment})}},{key:"renderCreateCourseButton",value:function(){return s.a.createElement(v,{currentUser:this.state.currentUser,role:this.state.role,showCreateCourse:this.showCreateCourse,redrawAll:this.redrawAll,seed:this.state.seed})}},{key:"render",value:function(){var e={type:"space",scroll:"false",height:window.innerHeight,padding:0,responsive:"a1",rows:[{view:"list",gravity:1,padding:0,scroll:!1,margin:0,height:225,data:["Admin","My Account","Manage Users","Settings","Logout"],ready:function(){this.select(this.getFirstId())},click:function(e){"Logout"===e?this.logout():"Manage Users"===e?this.handleMenuClick("ManageUsers"):"Manage Courses"===e?this.handleMenuClick("ManageCourses"):"Settings"===e?this.handleMenuClick("AdminSettings"):"Admin"===e?this.handleMenuClick("LiveFeed"):"My Account"===e&&this.accountClick()}.bind(this),select:!0},{view:"template",template:"right",content:"Courses",align:"right"},{gravity:1,view:"template",scroll:!1,template:"right",content:"CreateCourse",align:"right"}]};return s.a.createElement("div",{id:"AdminToolbar"},this.renderCreateCourseButton(),this.renderCourses(),s.a.createElement(h,{ui:e,data:null}))}}]),t}(i.Component),p=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={viewingCourse:e.viewingCourse,currentUser:e.currentUser,viewingAssignment:e.viewingAssignment,role:e.role,data:null,seed:e.seed},n.logout=e.logout,n.handleCreateCourseWindow=e.handleCreateCourse,n.handleMenuClick=e.handleMenuClick,n.showCreateCourse=e.handleCreateCourse,n.accountClick=e.accountClick,n.handleCourseViewer=e.handleCourseViewer,n.redrawAll=e.redrawAll,n}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"renderCourses",value:function(){return s.a.createElement(g,{currentUser:this.state.currentUser,role:this.state.role,handleCourseViewer:this.handleCourseViewer,viewingCourse:this.state.viewingCourse,handleMenuClick:this.handleMenuClick,accountClick:this.accountClick.bind(this),redrawAll:this.redrawAll,seed:this.state.seed,viewingAssignment:this.state.viewingAssignment})}},{key:"renderCreateCourseButton",value:function(){return s.a.createElement(v,{currentUser:this.state.currentUser,role:this.state.role,showCreateCourse:this.showCreateCourse,accountClick:this.accountClick.bind(this),redrawAll:this.redrawAll,seed:this.state.seed})}},{key:"render",value:function(){var e={type:"space",padding:0,height:window.innerHeight,width:350,rows:[{view:"list",data:["Instructor","My Account","Logout"],ready:function(){this.select(this.getFirstId())},click:function(e){"My Account"==e?this.accountClick():"Logout"===e&&this.logout()}.bind(this),select:!0,scroll:!1,height:150},{view:"template",scroll:!0,template:"right",content:"Courses",align:"right"},{gravity:1,view:"template",scroll:!0,template:"right",content:"CreateCourse",align:"right"}]};return s.a.createElement("div",{id:"InstructorToolbar"},this.renderCreateCourseButton(),this.renderCourses(),s.a.createElement(h,{ui:e,data:null}))}}]),t}(i.Component),f=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={currentUser:e.currentUser,role:e.role,viewingAssignment:e.viewingAssignment,data:null,seed:e.seed},n.logout=e.logout,n.handleMenuClick=e.handleMenuClick,n.renderAccountWindow=e.renderAccountWindow,n.uploadReview=e.uploadReview,n.accountClick=e.accountClick,n.redrawAll=e.redrawAll,n}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"handleCourseViewer",value:function(e){this.setState(e)}},{key:"renderCourses",value:function(){return s.a.createElement(g,{currentUser:this.state.currentUser,role:this.state.role,handleCourseViewer:this.handleCourseViewer.bind(this),viewingCourse:this.state.viewingCourse,handleMenuClick:this.handleMenuClick,accountClick:this.accountClick.bind(this),redrawAll:this.redrawAll,seed:this.state.seed,viewingAssignment:this.state.viewingAssignment})}},{key:"render",value:function(){var e={type:"space",scroll:"auto",height:window.innerHeight,width:350,padding:0,responsive:"a1",rows:[{view:"list",data:["Student","My Account","Upload an Assignment","Logout"],ready:function(){this.select(this.getFirstId())},click:function(e){"My Account"===e?this.accountClick():"Logout"===e&&this.logout()}.bind(this),select:!0,scroll:!1,height:200},{view:"template",scroll:!0,template:"right",content:"Courses",align:"right"}]};return s.a.createElement("div",{id:"StudentToolbar"},s.a.createElement(h,{ui:e,data:null}),this.renderCourses())}}]),t}(i.Component),C=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={currentUser:e.currentUser,role:e.role,administrators:null,instructors:null,students:null,invitedguests:null,editUser:null},null===n.state.administrators&&n.getData("/Admin/GetAdministrators","administrators"),null===n.state.instructors&&n.getData("/Admin/GetInstructors","instructors"),null===n.state.students&&n.getData("/Admin/GetStudents","students"),null===n.state.invitedguests&&n.getData("/Admin/GetInvitedGuests","invitedguests"),window.webix.protoUI({name:"react",defaults:{borderless:!0},$init:function(e){this.$ready.push(function(){r.a.render(this.config.app,this.$view)})}},window.webix.ui.view),n}return Object(c.a)(t,e),Object(l.a)(t,[{key:"getData",value:function(e,t){var n=this;fetch(e,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include",mode:"no-cors"}).then(function(e){return e.json()}).then(function(e){e.success&&n.setState(Object(m.a)({},t,e.data))}).catch(function(e){return console.error("Error:",e)})}},{key:"saveEditWindow",value:function(){var e=this,t=this,n=window.webix.$$("editUserForm").getValues(),i="/Admin/Edit?ID="+this.state.editUser.id+"&FirstName="+n.FirstName+"&LastName="+n.LastName+"&Email="+n.Email+"&Password="+n.Password+"&Role="+n.Role+"&IsEnabled="+(1===t.state.editUser.isEnabled);console.log("Making Request: "+i),fetch(i,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",mode:"no-cors"}).then(function(e){return e.json()}).then(function(n){n.success&&(t.setState({editUser:null,administrators:null,instructors:null,students:null,invitedguests:null}),window.webix.$$("editUserWindow").close(),null===e.state.administrators&&e.getData("/Admin/GetAdministrators","administrators"),null===e.state.instructors&&e.getData("/Admin/GetInstructors","instructors"),null===e.state.students&&e.getData("/Admin/GetStudents","students"),null===e.state.invitedguests&&e.getData("/Admin/GetInvitedGuests","invitedguests"))}).catch(function(e){return console.error("Error:",e)})}},{key:"newEditWindow",value:function(e){var t=this;null===this.state.editUser&&fetch("/Admin/GetUser?id="+e,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include",mode:"no-cors"}).then(function(e){return e.json()}).then(function(e){e.success&&(t.setState({editUser:e.data[0]}),t.renderEditWindow())}).catch(function(e){return console.error("Error:",e)})}},{key:"renderEditWindow",value:function(){console.log("rendering"+JSON.stringify(this.state.editUser));var e=this;window.webix.ui({view:"window",id:"editUserWindow",width:500,height:500,move:!0,position:"center",head:{type:"space",cols:[{view:"label",label:"Edit User"},{view:"button",label:"Close",width:70,left:250,click:function(){e.setState({editUser:null}),window.webix.$$("editUserWindow").close()}}]},body:{type:"space",rows:[{view:"form",id:"editUserForm",width:400,elements:[{view:"checkbox",label:"Active",name:"IsEnabled",value:e.state.editUser.isEnabled?1:0},{view:"text",label:"First Name",name:"FirstName",labelWidth:100,invalidMessage:"First Name can not be empty",value:this.state.editUser.firstName},{view:"text",label:"Last Name",name:"LastName",labelWidth:100,invalidMessage:"Last Name can not be empty",value:this.state.editUser.lastName},{view:"text",label:"Email",name:"Email",labelWidth:100,invalidMessage:"Must be valid email address",value:this.state.editUser.email},{view:"text",type:"password",label:"Password",name:"Password",labelWidth:100,invalidMessage:"Password can not be empty"},{view:"select",label:"Role",name:"Role",labelWidth:100,value:this.state.editUser.role,options:[{id:"Administrator",value:"Administrator"},{id:"Student",value:"Student"},{id:"Instructor",value:"Instructor"},{id:"InvitedGuest",value:"InvitedGuest"}]},{margin:5,cols:[{view:"button",value:"Edit User",type:"form",click:function(){e.saveEditWindow()}}]}],rules:{Email:window.webix.rules.isEmail,LastName:window.webix.rules.isNotEmpty,FirstName:window.webix.rules.isNotEmpty,Password:window.webix.rules.isNotEmpty}}]}}).show()}},{key:"createUser",value:function(){var e=this;if(window.webix.$$("newUserForm").validate()){var t=window.webix.$$("newUserForm").getValues();fetch("/Admin/Create?FirstName="+t.FirstName+"&LastName= "+t.LastName+"&Email="+t.Email+"&Password="+t.password,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",mode:"no-cors"}).then(function(e){return e.json()}).then(function(t){if(t.success)null!=window.webix.$$("newUserWindow")&&window.webix.$$("newUserWindow").close(),console.log("open new window to:  "+t.data[0].id),e.newEditWindow(t.data[0].id);else{var n="";t.error.forEach(function(e){n+=e.description}),window.webix.$$("newUserForm").elements.newUserErrorLabel.setValue(n)}}).catch(function(e){return console.error("Error:",e)})}}},{key:"renderOnData",value:function(){if(null!=this.state.administrators&&null!=this.state.instructors&&null!=this.state.students&&null!=this.state.invitedguests){var e=this,t={type:"space",rows:[{view:"button",id:"createUser_button",value:"Create User",inputWidth:100,click:function(){null==window.webix.$$("newUserWindow")&&window.webix.ui({view:"window",id:"newUserWindow",width:500,height:500,move:!0,position:"center",head:{type:"space",cols:[{view:"label",label:"Create New User"},{view:"button",label:"Close",width:70,left:250,click:function(){window.webix.$$("newUserWindow").close()}}]},body:{type:"space",rows:[{view:"form",id:"newUserForm",width:400,elements:[{view:"text",label:"First Name",name:"FirstName",labelWidth:100,invalidMessage:"First Name can not be empty"},{view:"text",label:"Last Name",name:"LastName",labelWidth:100,invalidMessage:"Last Name can not be empty"},{view:"text",label:"Email",name:"Email",labelWidth:100,invalidMessage:"Must be valid email address"},{view:"text",type:"password",label:"Password",name:"Password",labelWidth:100,invalidMessage:"Password can not be empty"},{view:"label",label:"",name:"newUserErrorLabel",labelWidth:100},{margin:5,cols:[{view:"button",value:"Create User",type:"form",click:function(){e.createUser()}}]}],rules:{Email:window.webix.rules.isEmail,LastName:window.webix.rules.isNotEmpty,FirstName:window.webix.rules.isNotEmpty,Password:window.webix.rules.isNotEmpty}}]}}).show()}},{id:"ManageUsers",view:"tabview",fillspace:!0,cells:[{header:"Administrators",view:"datatable",columns:[{id:"firstName",header:"First Name"},{id:"lastName",header:"Last Name"},{id:"email",header:"Email",fillspace:!0}],data:this.state.administrators,autoheight:!0,scroll:!1,on:{onItemClick:function(t,n,i){e.newEditWindow(t)}}},{header:"Instructors",view:"datatable",columns:[{id:"firstName",header:"First Name"},{id:"lastName",header:"Last Name"},{id:"email",header:"Email",fillspace:!0}],data:this.state.instructors,autoheight:!0,scroll:!1,on:{onItemClick:function(t,n,i){e.newEditWindow(t)}}},{header:"Students",view:"datatable",columns:[{id:"firstName",header:"First Name"},{id:"lastName",header:"Last Name"},{id:"email",header:"Email",fillspace:!0}],data:this.state.students,autoheight:!0,scroll:!1,on:{onItemClick:function(t,n,i){e.newEditWindow(t)}}},{header:"Invited Guests",view:"datatable",columns:[{id:"firstName",header:"First Name"},{id:"lastName",header:"Last Name"},{id:"email",header:"Email",fillspace:!0}],data:this.state.invitedguests,autoheight:!0,scroll:!1,on:{onItemClick:function(t,n,i){e.newEditWindow(t)}}}]}]};return s.a.createElement(h,{ui:t})}}},{key:"render",value:function(){return s.a.createElement("div",{id:"ManageUsers"},this.renderOnData())}}]),t}(i.Component),y=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={currentUser:e.currentUser,role:e.role},window.webix.protoUI({name:"react",defaults:{borderless:!0},$init:function(e){this.$ready.push(function(){r.a.render(this.config.app,this.$view)})}},window.webix.ui.view),n}return Object(c.a)(t,e),Object(l.a)(t,[{key:"Createcourse",value:function(){var e=this;if(window.webix.$$("newCourseForm").validate()){window.webix.$$("newCourseForm").getValues();fetch("/Course/CreateCourse?courseName=",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",mode:"no-cors"}).then(function(e){return e.json()}).then(function(t){if(t.success)null!=window.webix.$$("newCourseWindow")&&window.webix.$$("newCourseWindow").close(),console.log("open new window to:  "+t.data[0].id),e.newEditWindow(t.data[0].id);else{var n="";t.error.forEach(function(e){n+=e.description}),window.webix.$$("newCourseForm").elements.newUserErrorLabel.setValue(n)}}).catch(function(e){return console.error("Error:",e)})}}},{key:"render",value:function(){return s.a.createElement("div",{id:"ManageCourses"},"manage courses")}}]),t}(i.Component),A=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={currentUser:e.currentUser,role:e.role,SMTP_Enabled:null,SMTP_USERNAME:null,SMTP_Port:null,SMTP_HOST:null},n.renderWindow=!1,window.webix.protoUI({name:"react",defaults:{borderless:!0},$init:function(e){this.$ready.push(function(){r.a.render(this.config.app,this.$view)})}},window.webix.ui.view),n.loadSettings(),n}return Object(c.a)(t,e),Object(l.a)(t,[{key:"loadSettings",value:function(){null==this.state.SMTP_Enabled&&this.getData("Settings/GetSettings")}},{key:"getData",value:function(e){var t=this,n=this;fetch(e,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include",mode:"no-cors"}).then(function(e){return e.json()}).then(function(e){if(e.success)return e}).then(function(e){t.renderWindow=!0;var i={SMTP_Enabled:""+n.getSetting("SMTP_Enabled",e.data,"numeric"),SMTP_USERNAME:""+n.getSetting("SMTP_USERNAME",e.data,"string"),SMTP_Port:""+n.getSetting("SMTP_Port",e.data,"numeric"),SMTP_HOST:""+n.getSetting("SMTP_HOST",e.data,"string")};t.setState(i)}).catch(function(e){return console.error("Error:",e)})}},{key:"getSetting",value:function(e,t,n){for(var i=0;i<t.length;i++)if(t[i].id===e)return"numeric"===n?t[i].numericValue:t[i].stringValue}},{key:"renderEditWindow",value:function(){this.renderWindow&&window.webix.ui({view:"window",id:"settingsWindow",width:500,height:500,move:!0,position:"center",head:{type:"space",cols:[{view:"label",label:"Settings"},{view:"button",label:"Close",width:70,left:250,click:function(){window.webix.$$("settingsWindow").close()}}]},body:{type:"space",rows:[{view:"form",id:"configurationForm",width:400,elements:[{view:"checkbox",value:this.state.SMTP_Enabled,label:"Send Emails",name:"IsEnabled",labelWidth:100},{view:"text",label:"SMTP Server",name:"serverName",labelWidth:100,invalidMessage:"Server cannot be empty",value:this.state.SMTP_HOST},{view:"text",label:"SMTP Port",name:"portNum",width:150,labelWidth:100,invalidMessage:"Port cannot be empty",value:this.state.SMTP_Port},{view:"text",label:"SMTP Login",name:"smtpUsername",labelWidth:100,invalidMessage:"Please login to confirm changes",value:this.state.SMTP_USERNAME},{view:"text",type:"password",label:"SMTP Password",name:"smtpPassword",labelWidth:125,invalidMessage:"Password can not be empty"},{margin:5,cols:[{view:"button",value:"Save Settings",type:"form",click:function(){this.saveEditWindow()}.bind(this)}]}],rules:{serverName:window.webix.rules.isNotEmpty,portNum:window.webix.rules.isNotEmpty,usernameAdminLogin:window.webix.rules.isEmail,Password:window.webix.rules.isNotEmpty}}]}}).show()}},{key:"saveEditWindow",value:function(){var e=window.webix.$$("configurationForm").getValues(),t="/Settings/EditSettings?isEnabledId=SMTP_Enabled&isEnabledValue="+e.IsEnabled+"&serverId=SMTP_HOST&serverValue="+e.serverName+"&portId=SMTP_Port&portValue="+e.portNum+"&usernameId=SMTP_USERNAME&usernameValue="+e.smtpUsername+"&passwordId=SMTP_Password&passwordValue="+e.smtpPassword;console.log("Making Request: "+t),fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",mode:"no-cors"}).then(function(e){return e.json()}).then(function(e){e.success&&(alert("All Changes Saved Successfully."),console.log("We did it!"))}).catch(function(e){return console.error("Error:",e)})}},{key:"render",value:function(){return s.a.createElement("div",{id:"AdminSettings"},this.renderEditWindow())}}]),t}(i.Component),E=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={data:null},n}return Object(c.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{id:"LiveFeed"},"LiveFeed")}}]),t}(i.Component),S=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={currentUser:e.currentUser,role:e.role,viewingCourse:e.viewingCourse,addingStudent:!1,seed:e.seed},n.redrawAll=e.redrawAll,n.handleCourseViewer=e.handleCourseViewer,n.handleMenuClick=e.handleMenuClick,window.webix.protoUI({name:"react",defaults:{borderless:!0},$init:function(e){this.$ready.push(function(){r.a.render(this.config.app,this.$view)})}},window.webix.ui.view),n}return Object(c.a)(t,e),Object(l.a)(t,[{key:"addStudentWindow",value:function(){window.webix.ui({view:"window",id:"addStudentWindow",width:500,height:500,move:!0,position:"center",head:{type:"space",cols:[{view:"label",label:"Add Student to Course"},{view:"button",id:"addStudentButton",label:"Close",width:70,left:250,click:function(){this.setState({addingStudent:!1}),window.webix.$$("addStudentWindow").close()}.bind(this)}]},body:{type:"space",rows:[{view:"form",id:"addStudentForm",width:400,elements:[{view:"text",label:"Email",name:"Email",labelWidth:100,invalidMessage:"Must be valid email address"},{margin:5,cols:[{view:"button",value:"Add Student",type:"form",id:"AddStudentFormButton"}]}],rules:{Email:window.webix.rules.isEmail}}]}}).show(),console.log("Does button have click: "+window.webix.$$("AddStudentFormButton").hasEvent("onItemClick")),!1===window.webix.$$("AddStudentFormButton").hasEvent("onItemClick")&&(console.log("binding function to button"),window.webix.$$("AddStudentFormButton").attachEvent("onItemClick",function(e){if(window.webix.$$("addStudentForm").validate()){var t=window.webix.$$("addStudentForm").elements.Email.config.value;this.addStudent(t,this.state.viewingCourse)}}.bind(this)))}},{key:"addStudent",value:function(e,t){var n=this;fetch("/Course/AddStudentToCourse?courseID="+t+"&studentEmail="+e,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",mode:"no-cors"}).then(function(e){return e.json()}).then(function(e){e.success&&(console.log("Added Student"),window.webix.$$("addStudentWindow").close(),n.redrawAll())}).catch(function(e){return console.error("Error:",e)})}},{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"removeStudent",value:function(e){var t=this;fetch("/Course/RemoveStudentToCourse?courseID="+this.state.viewingCourse+"&studentID="+e,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"}).then(function(e){return e.json()}).then(function(e){e.success&&t.redrawAll()}).catch(function(e){return console.error("Error:",e)})}},{key:"getStudentGroup",value:function(e,t){fetch("/Course/GetStudentGroup?studentID="+e+"&courseID="+t,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"}).then(function(e){if(e.success)return e}).catch(function(e){return console.error("Error:",e)})}},{key:"changeStudentGroup",value:function(e,t){var n=this;fetch("/Course/ChangeStudentGroup?&courseGroupID="+e+"&reviewGroupID="+t,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include"}).then(function(e){e.success&&n.redrawAll()}).catch(function(e){return console.error("Error:",e)})}},{key:"renderUploadAssignmentWindow",value:function(){window.webix.ui({view:"window",id:"uploadAssignmentWindow",width:600,move:!0,position:"center",head:{type:"space",cols:[{view:"label",label:"Upload an Assignment"},{view:"button",label:"Close",width:70,left:250,click:function(){window.webix.$$("uploadAssignmentWindow").close()}}]},body:{type:"space",rows:[{view:"form",id:"uploadAssignmentForm",elements:[{view:"label",label:"Upload your Assignment form here: ",name:"",labelWidth:"auto",value:""},{view:"uploader",inputName:"files",upload:"/CourseAssignment/CreateAssignment",id:"AssignmentFile",link:"mylist",value:"Upload File",autosend:!1},{view:"list",id:"mylist",type:"uploader",autoheight:!0,borderless:!0},{view:"text",label:"Assignment Name",name:"Assignment_Name",labelWidth:200,invalidMessage:"Please enter Assignment Name"},{view:"calendar",id:"my_calendar",name:"Due_Date",date:new Date,weekHeader:!0,events:window.webix.Date.isHoliday,width:300,height:250},{view:"button",value:"Upload",type:"form",click:function(){window.webix.$$("uploadAssignmentForm").validate();var e=window.webix.$$("uploadAssignmentForm").getValues();window.webix.$$("AssignmentFile").define({urlData:{assignmentname:e.Assignment_Name,courseID:e.Course,dueDate:window.webix.$$("my_calendar").config.date.toUTCString()}}),window.webix.$$("AssignmentFile").send(function(e){console.log("upload send: "+JSON.stringify(e)),null!=e?(console.log(Date("07/08/2019")),window.webix.message("Succsess"),window.webix.$$("uploadAssignmentWindow").close()):alert("Nothing to Submit")})}}],rules:{Course:window.webix.rules.isNotEmpty,Due_Date:window.webix.rules.isNotEmpty,Assignment_Name:window.webix.rules.isNotEmpty}}]}}).show();window.webix.$$("uploadAssignmentForm").setValues({Course:this.state.viewingCourse})}},{key:"renderChangeStudentGroupWindow",value:function(e){window.webix.ui({view:"window",id:"changeStudentGroupWindow",width:600,move:!0,position:"center",head:{type:"space",cols:[{view:"label",label:"Change Student Group"},{view:"button",label:"Close",width:70,left:250,click:function(){window.webix.$$("changeStudentGroupWindow").close()}}]},body:{type:"space",rows:[{view:"form",id:"changeStudentGroupForm",elements:[{id:e,view:"text",label:"CourseGroup Record ID: "+e,name:"studentGroup",labelWidth:200,invalidMessage:"Please Enter a Valid Student Group ID"},{view:"button",value:"Change",type:"form",click:function(){console.log("I was clicked");window.webix.$$("changeStudentGroupForm").validate();var t=window.webix.$$("changeStudentGroupForm").getValues();this.changeStudentGroup(e,t.studentGroup)}.bind(this)}],rules:{studentGroup:window.webix.rules.isNotEmpty}}]}}).show()}},{key:"deleteAssignment",value:function(e){var t=this;fetch("/CourseAssignment/DeleteAssignment?assignmentID="+e,{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"}).then(function(e){return e.json()}).then(function(e){e.success&&(t.redrawAll(),window.webix.$$("AssignmentsContent").load("/CourseAssignment/Assignments?courseID="+t.state.viewingCourse))}).catch(function(e){return console.error("Error:",e)})}},{key:"render",value:function(){console.log("render course content");var e={rows:[{header:"Course Settings (ID: "+this.state.viewingCourse+")",body:" "},{view:"tabview",autoheight:!0,header:"Course",cells:[{autoheight:!0,header:"Assignments",body:{autoheight:!0,rows:[{view:"button",value:"Add Assignment",type:"form",id:"AddAssignmnetButton",on:{onItemClick:function(e){this.renderUploadAssignmentWindow()}.bind(this)}},{css:"subCourseMenu",header:"Assignments",autoheight:!0,body:{autoheight:!0,view:"datatable",id:"AssignmentsContent",columns:[{id:"name",header:"Name",width:150,sort:"string"},{id:"dueDate",header:"DueDate",width:150,sort:"string"},{header:"Manage",gravity:2,template:function(e){return"<div class='webix_el_button'><button class='webixtype_base'>Remove</button></div>"}}],url:"/CourseAssignment/Assignments?courseID="+this.state.viewingCourse,onClick:{webixtype_base:function(e,t,n){if(confirm("Are you sure you want to delete this assignment?")){var i=window.webix.$$("AssignmentsContent").getItem(t);this.deleteAssignment(i.id)}}.bind(this)}}}]}},{header:"Groups",body:{autoheight:!0,rows:[{autoheight:!0,view:"datatable",columns:[{id:"id",map:"#fK_AppUser.id#",header:"",width:50},{id:"firstName",map:"#fK_AppUser.firstName#",header:"First Name",width:200},{id:"lastName",map:"#fK_AppUser.lastName#",header:"Last Name",width:200},{id:"reviewGroup",header:"Review Group",width:400}],on:{onItemClick:function(e,t,n){console.log(e.row),this.renderChangeStudentGroupWindow(e.row)}.bind(this)},url:"/Course/GetStudentGroups?courseID="+this.state.viewingCourse}]}},{header:"Students",body:{autoheight:!0,rows:[{view:"button",value:"Add Student",css:"webix_primary",inputWidth:100,on:{onItemClick:function(e){this.state.addingStudent||(this.setState({addingStudent:!0}),this.addStudentWindow())}.bind(this)}},{autoheight:!0,view:"datatable",columns:[{id:"rank",header:"",width:50},{id:"firstName",header:"First Name",width:200},{id:"lastName",header:"Last Name",width:80},{header:"Enrollment",width:100,template:"<input type='button' value='Remove' class='remove_button'>"}],onClick:{remove_button:function(e,t){confirm("Are you sure you want to remove this student?")&&(console.log("I want to remove "+t.row),this.removeStudent(t.row))}.bind(this)},url:"/Course/GetStudents?courseID="+this.state.viewingCourse}]}}]}]};return s.a.createElement("div",{id:"CourseContent"},s.a.createElement(h,{ui:e,data:null}))}}]),t}(i.Component),k=(n(24),function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={errorMsg:null,assignment:null,assignmentID:null,currentUser:e.currentUser,role:e.role,viewingCourse:e.viewingCourse,viewingAssignment:e.viewingAssignment,downloadLink:e.buildAssignmentLink},n.uploadReview=e.uploadReview,n.fetchStudentAssignmentByCourseAssignmentAndUser.bind(Object(w.a)(Object(w.a)(n))),n.renderUploadStudentAssignmentWindow.bind(Object(w.a)(Object(w.a)(n))),n.renderAssignmentReviewButton.bind(Object(w.a)(Object(w.a)(n))),n.getStudentAssignmentSubmissionDetails(e),n}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){console.log("Received Props"),this.setState(e)}},{key:"fetchStudentAssignmentByCourseAssignmentAndUser",value:function(e){var t=this;console.log("VIEWING ASSIGNMENT "+JSON.stringify(e)),fetch("/StudentAssignment/GetStudentAssignmentsByCourseAssignmentAndUser?courseAssignmentId="+this.state.viewingAssignment.id,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include",mode:"no-cors"}).then(function(e){return e.json()}).then(function(e){console.log("THE RESPONSE = "+JSON.stringify(e)),e.success?e.data.length>0&&(t.setState({assignment:e.data[0].fK_PFile.name,assignmentID:e.data[0].fK_PFile.id}),console.log("NAME OF ASSIGNMENT:"+e.data[0].fK_PFile.name),console.log("ID OF ASSIGNMENT:"+e.data[0].fK_PFile.id)):t.setState({errorMsg:e.error[0].description})})}},{key:"getStudentAssignmentSubmissionDetails",value:function(e){this.fetchStudentAssignmentByCourseAssignmentAndUser(e)}},{key:"renderAssignmentReviewButton",value:function(){var e={view:"button",id:"uploadReviewButton",value:"Upload Review",css:"webix_primary",inputWidth:175,click:function(){this.uploadReview()}.bind(this)};return s.a.createElement(h,{ui:e,data:null})}},{key:"renderUploadStudentAssignmentButton",value:function(){var e={view:"button",id:"uploadStudentAssignmentButton",value:"Upload Assignment",css:"webix_primary",inputWidth:175,click:function(){this.renderUploadStudentAssignmentWindow()}.bind(this)};return s.a.createElement(h,{ui:e,data:null})}},{key:"renderUploadStudentAssignmentWindow",value:function(e){console.log("VIEWING ASSIGNMENT ID = "+this.state.viewingAssignment.id);window.webix.ui({view:"window",id:"uploadStudentAssignmentWindow",width:600,move:!0,position:"center",head:{type:"space",cols:[{view:"label",label:"Upload a student Assignment"},{view:"button",label:"Close",width:70,left:250,click:function(){window.webix.$$("uploadStudentAssignmentWindow").close()}}]},body:{type:"space",rows:[{view:"form",id:"uploadStudentAssignmentForm",elements:[{view:"label",label:"Upload your student assignment here: ",name:"",labelWidth:"auto",value:""},{view:"uploader",inputName:"files",upload:"/StudentAssignment/UploadStudentAssignment",id:"studentAssignmentFile",link:"mylist",value:"Upload File",autosend:!1},{view:"list",id:"mylist",type:"uploader",autoheight:!0,borderless:!0},{view:"button",value:"Upload",type:"form",click:function(e){console.log("VIEWING ASSIGNMENT ID = "+this.state.viewingAssignment.id);window.webix.$$("uploadStudentAssignmentForm").validate(),window.webix.$$("uploadStudentAssignmentForm").getValues();window.webix.$$("studentAssignmentFile").define({urlData:{courseAssignmentId:this.state.viewingAssignment.id}}),window.webix.$$("studentAssignmentFile").send(function(e){null!=e?(window.webix.message("Succsess"),window.webix.$$("uploadAssignmentWindow").close()):alert("Nothing to Submit")})}.bind(this)}],rules:{}}]}}).show();window.webix.$$("uploadStudentAssignmentForm").setValues({Course:this.state.viewingCourse})}},{key:"renderLink",value:function(){if(null!=this.state.assignmentID)return console.log("render the link"),s.a.createElement("div",null,s.a.createElement("a",{href:"/PFile/Download?pFileId="+this.state.assignmentID},"Download Student Assignment "));console.log("no render")}},{key:"render",value:function(){return s.a.createElement("div",{id:"ShowStudentAssignment",className:"showStudentAss"},s.a.createElement("h1",null,"Your Submission Information for ",this.state.viewingAssignment.name),s.a.createElement("h3",null,this.state.assignment),s.a.createElement("h3",null,this.state.assignmentID),s.a.createElement("h3",null,this.state.errorMsg),this.renderUploadStudentAssignmentButton(),this.renderAssignmentReviewButton(),this.renderLink())}}]),t}(i.Component)),N=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={currentUser:e.currentUser,role:e.role,viewingCourse:e.viewingCourse,viewingAssignment:e.viewingAssignment,downloadLink:n.buildAssignmentLink(e),courseName:e.viewingAssignment.fK_COURSE.name,assignmentName:e.viewingAssignment.name},n.uploadReview=e.uploadReview,n}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"buildAssignmentLink",value:function(e){try{return s.a.createElement("div",null,s.a.createElement("a",{href:"/PFile/Download?pFileId="+e.viewingAssignment.pFile.id,target:"new"},"Download Instructions"),s.a.createElement("b",null))}catch(t){return console.log("Failed: "+t),"No Assignment Instructions Available"}return null}},{key:"renderAdminInstructorList",value:function(){return s.a.createElement("div",null,s.a.createElement("h2",null,this.state.courseName),s.a.createElement("h3",null,this.state.assignmentName),s.a.createElement("div",{id:"downloadLink"},this.state.downloadLink))}},{key:"render",value:function(){return s.a.createElement("div",{id:"ShowAssignment"},this.renderAdminInstructorList(),s.a.createElement(k,{currentUser:this.state.currentUser,role:this.state.role,viewingAssignment:this.state.viewingAssignment,viewingCourse:this.state.viewingCourse,uploadReview:this.uploadReview}))}}]),t}(i.Component),U=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={currentUser:e.currentUser,role:e.role,data:null,account:null,viewingCourse:e.viewingCourse,viewingAssignment:e.viewingAssignment,currentContentWidgets:["LiveFeed"],seed:e.seed},n.redrawAll=e.redrawAll,n.handleCourseViewer=e.handleCourseViewer,n.handleLogin=e.handleLogin,n.logout.bind(Object(w.a)(Object(w.a)(n))),n.accountClick.bind(Object(w.a)(Object(w.a)(n))),n.fetchAccountFormData.bind(Object(w.a)(Object(w.a)(n))),n.uploadReview.bind(Object(w.a)(Object(w.a)(n))),n.handleMenuClick.bind(Object(w.a)(Object(w.a)(n))),n}return Object(c.a)(t,e),Object(l.a)(t,[{key:"renderPortal",value:function(){window.webix.protoUI({name:"portal",defaults:{borderless:!0},$init:function(e){this.$ready.push(function(){r.a.render(this.config.app,this.$view)})}},window.webix.ui.view)}},{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"renderLiveFeed",value:function(){if(this.state.currentContentWidgets.includes("LiveFeed"))return s.a.createElement(E,{currentUser:this.state.currentUser,role:this.state.role,logout:this.logout.bind(this),redrawAll:this.redrawAll,seed:this.state.seed})}},{key:"renderAdminToolbar",value:function(){if("Administrator"===this.state.role)return s.a.createElement(b,{currentUser:this.state.currentUser,role:this.state.role,logout:this.logout.bind(this),handleMenuClick:this.handleMenuClick.bind(this),viewingCourse:this.state.viewingCourse,handleCourseViewer:this.handleCourseViewer.bind(this),accountClick:this.accountClick.bind(this),redrawAll:this.redrawAll,seed:this.state.seed,viewingAssignment:this.state.viewingAssignment})}},{key:"renderInstructorToolbar",value:function(){if("Instructor"===this.state.role)return s.a.createElement(p,{currentUser:this.state.currentUser,role:this.state.role,logout:this.logout.bind(this),handleCourseViewer:this.handleCourseViewer.bind(this),handleMenuClick:this.handleMenuClick.bind(this),viewingCourse:this.state.viewingCourse,accountClick:this.accountClick.bind(this),redrawAll:this.redrawAll,seed:this.state.seed,viewingAssignment:this.state.viewingAssignment})}},{key:"renderStudentToolbar",value:function(){if("Student"===this.state.role)return s.a.createElement(f,{currentUser:this.state.currentUser,role:this.state.role,logout:this.logout.bind(this),handleMenuClick:this.handleMenuClick.bind(this),viewingCourse:this.state.viewingCourse,accountClick:this.accountClick.bind(this),redrawAll:this.redrawAll,seed:this.state.seed,viewingAssignment:this.state.viewingAssignment})}},{key:"renderCourseContent",value:function(){if(("Instructor"===this.state.role||"Administrator"===this.state.role)&&this.state.currentContentWidgets.includes("CourseContent"))return s.a.createElement(S,{currentUser:this.state.currentUser,role:this.state.role,handleMenuClick:this.handleMenuClick.bind(this),viewingCourse:this.state.viewingCourse,handleCourseViewer:this.handleCourseViewer.bind(this),redrawAll:this.redrawAll,seed:this.state.seed})}},{key:"renderAdminManageUsers",value:function(){if("Administrator"===this.state.role&&this.state.currentContentWidgets.includes("ManageUsers"))return s.a.createElement(C,{currentUser:this.state.currentUser,role:this.state.role})}},{key:"renderAdminManageCourses",value:function(){if("Administrator"===this.state.role&&this.state.currentContentWidgets.includes("ManageCourses"))return s.a.createElement(y,{currentUser:this.state.currentUser,role:this.state.role})}},{key:"renderAdminSettings",value:function(){if("Administrator"===this.state.role&&this.state.currentContentWidgets.includes("AdminSettings"))return s.a.createElement(A,{currentUser:this.state.currentUser,role:this.state.role})}},{key:"renderShowAssignment",value:function(){if(this.state.currentContentWidgets.includes("ShowAssignment"))return s.a.createElement(N,{currentUser:this.state.currentUser,role:this.state.role,viewingCourse:this.state.viewingCourse,viewingAssignment:this.state.viewingAssignment,uploadReview:this.uploadReview})}},{key:"renderShowStudentAssignment",value:function(){if(this.state.currentContentWidgets.includes("ShowStudentAssignment"))return s.a.createElement(k,{currentUser:this.state.currentUser,role:this.state.role,viewingCourse:this.state.viewingCourse,viewingAssignment:this.state.viewingAssignment})}},{key:"handleMenuClick",value:function(e){this.setState({currentContentWidgets:e})}},{key:"fetchAccountFormData",value:function(){var e=this;fetch("/Account/PopulateFormData",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include",mode:"no-cors"}).then(function(e){return e.json()}).then(function(t){if(t.success){var n={FirstName:t.data[0].firstName,LastName:t.data[0].lastName,Email:t.data[0].email};return e.setState({account:n}),!0}return!1}).then(function(t){t&&e.renderAccountWindow()}).catch(function(e){return console.error("Error:",e)})}},{key:"accountClick",value:function(){this.fetchAccountFormData()}},{key:"renderAccountWindow",value:function(){window.webix.ui({view:"window",id:"accountWindow",width:900,height:600,move:!0,position:"center",head:{type:"space",cols:[{view:"label",label:"Edit My Account"},{view:"button",label:"Close",width:70,left:250,click:function(){this.setState({editUser:null}),window.webix.$$("accountWindow").close()}.bind(this)}]},body:{type:"space",rows:[{view:"form",id:"editAccountForm",width:900,elements:[{view:"label",label:"Your Email: "+this.state.account.Email,name:"Email",labelWidth:100,invalidMessage:"Must be valid email address",value:this.state.account.Email},{view:"text",label:"First Name",name:"FirstName",labelWidth:100,invalidMessage:"First Name can not be empty",value:this.state.account.FirstName},{view:"text",label:"Last Name",name:"LastName",labelWidth:100,invalidMessage:"Last Name can not be empty",value:this.state.account.LastName},{view:"text",type:"password",label:"New Password",name:"Password1",labelWidth:160,invalidMessage:"Password can not be empty"},{view:"text",type:"password",label:"Confirm Password",name:"Password2",labelWidth:160,invalidMessage:"Password can not be empty"},{margin:5,cols:[{view:"button",value:"Save Changes",type:"form",click:function(){this.saveAccountChanges()}.bind(this)}]}],rules:{Email:window.webix.rules.isEmail,LastName:window.webix.rules.isNotEmpty,FirstName:window.webix.rules.isNotEmpty,Password:window.webix.rules.isNotEmpty}}]}}).show()}},{key:"saveAccountChanges",value:function(){var e,t=this,n=window.webix.$$("editAccountForm").getValues();e=""!==n.Password1&&n.Password1===n.Password2?n.Password2:"",fetch("/Account/UpdateAccountInfo?email="+n.Email+"&firstName="+n.FirstName+"&lastName="+n.LastName+"&password="+e,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",mode:"no-cors"}).then(function(e){return e.json()}).then(function(e){if(e.success){var n={FirstName:e.data[0].firstName,LastName:e.data[0].lastName,Email:e.data[0].email};return t.setState({account:n}),!0}return!1}).then(function(e){e&&(window.webix.$$("accountWindow").close(),t.logout())}).catch(function(e){return console.error("Error:",e)})}},{key:"renderMultipleContentWidgets",value:function(){if(null!=this.state.currentContentWidgets){for(var e=[],t=0;t<=this.state.currentContentWidgets.Length;t++)e.push({view:"template",scroll:!1,content:this.state.currentContentWidgets[t]});return{type:"space",id:"a2",rows:[{type:"space",padding:0,responsive:"a2",height:window.innerHeight,width:.7*window.innerWidth,cols:[e]}]}}}},{key:"uploadReview",value:function(){window.webix.ui({view:"window",id:"uploadReviewWindow",width:900,height:600,move:!0,position:"center",head:{type:"space",cols:[{view:"label",label:"Upload a Review"},{view:"button",label:"Close",width:70,left:250,click:function(){window.webix.$$("uploadReviewWindow").close()}}]},body:{type:"space",rows:[{view:"form",id:"uploadReviewForm",width:900,elements:[{view:"label",label:"Upload your review form here: ",name:"",labelWidth:100,value:""},{view:"uploader",inputName:"files",upload:"/Review/UploadReview",urlData:{studentAssignmentId:35},name:"ReviewFile",value:"Click here to upload your review file"},{view:"text",label:"Course",name:"Course",labelWidth:100,value:""},{view:"text",label:"Assignment",name:"Assignment",labelWidth:100,value:""}],rules:{Email:window.webix.rules.isEmail,LastName:window.webix.rules.isNotEmpty,FirstName:window.webix.rules.isNotEmpty,Password:window.webix.rules.isNotEmpty}}]}}).show()}},{key:"logout",value:function(){var e=this;fetch("/Account/Logout",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include",mode:"no-cors"}).then(function(e){return e.json()}).then(function(t){t.success?(e.handleLogin(null,null),document.location.reload()):console.log(t.error)}).catch(function(e){return console.error("Error:",e)})}},{key:"render",value:function(){var e=function(){return"Administrator"===this.state.role?"AdminToolbar":"Instructor"===this.state.role?"InstructorToolbar":"Student"===this.state.role?"StudentToolbar":void 0}.bind(this),t={type:"space",id:"a1",rows:[{type:"space",scroll:"auto",padding:0,responsive:"a1",height:window.innerHeight,width:window.innerWidth,cols:[{view:"template",scroll:!1,gravity:1,width:350,template:"left",content:e()},{view:"template",scroll:!1,gravity:4,template:"right",content:"MultipleContentWidgets"}]}]};return s.a.createElement("div",{id:"Portal"},this.renderAdminToolbar(),this.renderInstructorToolbar(),this.renderStudentToolbar(),s.a.createElement(h,{ui:t,data:null}),s.a.createElement("div",{id:"MultipleContentWidgets"},this.renderLiveFeed(),this.renderAdminManageUsers(),this.renderAdminManageCourses(),this.renderAdminSettings(),this.renderCourseContent(),this.renderShowAssignment(),this.renderShowStudentAssignment()))}}]),t}(i.Component),x=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={data:null},n.updateLogin=e.handleLogin,window.webix.protoUI({name:"react",defaults:{borderless:!0},$init:function(e){this.$ready.push(function(){r.a.render(this.config.app,this.$view)})}},window.webix.ui.view),n}return Object(c.a)(t,e),Object(l.a)(t,[{key:"clearError",value:function(){window.webix.$$("loginForm").elements.passwordErrorLabel.setValue("")}},{key:"doLogin",value:function(){var e=this,t=window.webix.$$("loginForm").elements.emailAddress.getValue(),n=window.webix.$$("loginForm").elements.password.getValue();fetch("/Account/Login?Email="+t+"&Password="+n+"&returnUrl=",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",mode:"no-cors"}).then(function(e){return e.json()}).then(function(t){if(t.success)e.updateLogin(t.data[0].emailAddress,t.data[0].role);else{var n="";t.error.forEach(function(e){n+=e.description}),window.webix.$$("loginForm").elements.passwordErrorLabel.setValue(n)}}).catch(function(e){return console.error("Error:",e)})}},{key:"render",value:function(){var e={type:"space",id:"a1",height:window.innerHeight-5,width:window.innerWidth-5,minWidth:500,minHeight:500,rows:[{type:"space",padding:0,responsive:"a1",margin:0,cols:[{},{view:"form",id:"loginForm",elements:[{type:"header",template:"Please Login"},{view:"text",labelAlign:"top",labelPosition:"top",name:"emailAddress",label:"Email Address",validate:"isNotEmpty",validateEvent:"key",value:""},{view:"text",labelPosition:"top",type:"password",name:"password",label:"Password",validate:"isNotEmpty",validateEvent:"key",value:""},{view:"label",name:"passwordErrorLabel",label:""},{},{view:"button",label:"login",click:this.doLogin.bind(this),hotkey:"enter"}],width:500,height:500,gravity:.3},{}]}]};return s.a.createElement("div",null,s.a.createElement(h,{ui:e,data:null}))}}]),t}(i.Component),$=(i.Component,function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={currentUser:null,role:null,viewingCourse:null,viewingAssignment:null,seed:(new Date).getTime()},n.handleLogin=n.updateLogin.bind(Object(w.a)(Object(w.a)(n))),n.checkIfLoggedIn(),n}return Object(c.a)(t,e),Object(l.a)(t,[{key:"checkIfLoggedIn",value:function(){var e=this;fetch("/Account/GetCurrentUserRole",{method:"GET",credentials:"same-origin",cache:"no-cache",mode:"cors",headers:{"Content-Type":"application/json","X-PINGOVER":"because"}}).then(function(e){return e.json()}).then(function(t){t.success?t.data[0].role.length>1&&t.data[0].emailAddress.length>1&&e.setState({currentUser:t.data[0].emailAddress,role:t.data[0].role}):t.error.forEach(function(e){console.log(e)})}).catch(function(e){return console.error("Error:",e)})}},{key:"redrawAll",value:function(){console.log("REDRAW ALL TRIGGERED"),this.setState({seed:(new Date).getTime()})}},{key:"handleCourseViewer",value:function(e){console.log("changing state"+JSON.stringify(e)),this.setState(e)}},{key:"renderPortal",value:function(){if(null!=this.state.currentUser)return s.a.createElement(U,{currentUser:this.state.currentUser,role:this.state.role,handleLogin:this.handleLogin,viewingCourse:this.state.viewingCourse,handleCourseViewer:this.handleCourseViewer.bind(this),redrawAll:this.redrawAll.bind(this),seed:this.state.seed,viewingAssignment:this.state.viewingAssignment})}},{key:"renderLogin",value:function(){if(null==this.state.currentUser)return s.a.createElement(x,{handleLogin:this.handleLogin})}},{key:"updateLogin",value:function(e,t){this.setState({currentUser:e,role:t})}},{key:"render",value:function(){return s.a.createElement("div",{className:"appContainer"},this.renderLogin(),this.renderPortal())}}]),t}(i.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[11,1,2]]]);
//# sourceMappingURL=main.cafb4a04.chunk.js.map